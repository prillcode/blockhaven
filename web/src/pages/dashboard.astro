---
// src/pages/dashboard.astro
export const prerender = false;

import { getSession } from "../lib/auth-helpers";
import DashboardLayout from "../layouts/DashboardLayout.astro";
import { DashboardContent } from "../components/admin/DashboardContent";

const session = await getSession(Astro.request);
if (!session || !session.user) {
  return Astro.redirect("/login");
}

const { user } = session;
---

<DashboardLayout title="Dashboard - BlockHaven Admin" user={user}>
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-primary-gold">Server Dashboard</h1>
    <p class="text-text-muted mt-2">Manage your Minecraft server from anywhere</p>
  </div>

  <DashboardContent client:load />

  <!-- Future components will go here (Cost, Logs, Quick Actions) -->
</DashboardLayout>
