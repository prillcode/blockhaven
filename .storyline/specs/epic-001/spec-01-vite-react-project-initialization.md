---
spec_id: 01
story_id: 01
epic_id: 001
title: Vite + React 19 + TypeScript Project Initialization
status: ready_for_implementation
created: 2026-01-10
---

# Technical Spec 01: Vite + React 19 + TypeScript Project Initialization

## Overview

**User story:** .storyline/stories/epic-001/story-01-vite-react-project-initialization.md

**Goal:** Initialize a modern frontend development environment using Vite 6.0, React 19, and TypeScript 5.7+ with pnpm package manager, including complete project directory structure for the BlockHaven marketing website.

**Approach:** Use Vite's official `create-vite` CLI with the `react-ts` template, install additional dependencies for routing/styling/animations, and create the complete directory structure as specified in the web implementation plan.

## Technical Design

### Architecture Decision

**Chosen approach:** Vite official template + manual dependency installation + directory scaffolding

**Alternatives considered:**
- **Manual Vite configuration from scratch** - Too time-consuming, error-prone, no benefit over template
- **Create React App (CRA)** - Deprecated, slower, not recommended for new projects in 2026
- **Next.js or Remix** - Overkill for static marketing site, server-side rendering not needed

**Rationale:** Vite's official template provides the fastest path to a working environment with optimal defaults. React 19 is the latest stable version with concurrent rendering improvements. TypeScript ensures type safety and better DX.

### System Components

**Frontend:**
- Vite build tool (v6.0+) with HMR and fast builds
- React 19 with React DOM for UI rendering
- TypeScript 5.7+ for type safety
- Directory structure for organized code (components, pages, hooks, contexts, etc.)

**Backend:**
- Not applicable for this story (Epic 003)

**Database:**
- Not applicable for this story

**External integrations:**
- None (all dependencies are npm packages)

## Implementation Details

### Files to Create

```
/home/aaronprill/projects/blockhaven/web/.gitignore
- Purpose: Exclude node_modules, build artifacts, and environment files from version control
- Contents:
  node_modules/
  dist/
  .env
  .env.local
  pnpm-lock.yaml
  .DS_Store
  *.log
```

```
/home/aaronprill/projects/blockhaven/web/README.md
- Purpose: Project documentation with setup and development instructions
- Contents: Project description, prerequisites, setup commands, development commands
```

### Files Created by Vite Template

These files will be automatically generated by `pnpm create vite`:

```
/home/aaronprill/projects/blockhaven/web/package.json
- Purpose: Project manifest with dependencies and scripts
- Vite template creates basic version, we'll add additional dependencies

/home/aaronprill/projects/blockhaven/web/vite.config.ts
- Purpose: Vite configuration
- Template provides default, will be modified in Story 02 for Tailwind

/home/aaronprill/projects/blockhaven/web/tsconfig.json
- Purpose: TypeScript compiler configuration
- Template provides strict config

/home/aaronprill/projects/blockhaven/web/tsconfig.node.json
- Purpose: TypeScript config for Vite config file
- Template provides this

/home/aaronprill/projects/blockhaven/web/index.html
- Purpose: Entry HTML file
- Template provides basic structure

/home/aaronprill/projects/blockhaven/web/src/main.tsx
- Purpose: Application entry point
- Template provides React render logic

/home/aaronprill/projects/blockhaven/web/src/App.tsx
- Purpose: Root React component
- Template provides default component

/home/aaronprill/projects/blockhaven/web/src/App.css
- Purpose: App styles (will be replaced with Tailwind in Story 02)
- Template provides basic styles

/home/aaronprill/projects/blockhaven/web/src/index.css
- Purpose: Global styles (will be replaced with Tailwind imports in Story 02)
- Template provides reset styles

/home/aaronprill/projects/blockhaven/web/src/vite-env.d.ts
- Purpose: Vite type definitions
- Template provides this
```

### Directory Structure to Create

After Vite initialization, create these directories:

```bash
mkdir -p src/components/layout
mkdir -p src/components/sections
mkdir -p src/components/widgets
mkdir -p src/components/ui
mkdir -p src/pages
mkdir -p src/hooks
mkdir -p src/contexts
mkdir -p src/data
mkdir -p src/lib
mkdir -p src/types
mkdir -p src/styles
mkdir -p public/worlds
```

**Purpose of each directory:**
- `src/components/layout/` - Header, Footer, Navigation components
- `src/components/sections/` - Hero, WorldsShowcase, FeaturesGrid, etc.
- `src/components/widgets/` - ServerStatus, ContactForm, ThemeToggle, CopyIPButton
- `src/components/ui/` - Reusable UI components (Button, Card, Badge, etc.)
- `src/pages/` - Page components (Home, Worlds, Rules, Contact)
- `src/hooks/` - Custom React hooks
- `src/contexts/` - React contexts (ThemeContext)
- `src/data/` - Static data (worlds, features, rules)
- `src/lib/` - Utility libraries (API clients, helpers)
- `src/types/` - TypeScript type definitions
- `src/styles/` - Global CSS/Tailwind imports
- `public/worlds/` - World screenshot images

### Commands to Execute

**Step 1: Navigate to web directory**
```bash
cd /home/aaronprill/projects/blockhaven/web
```

**Step 2: Initialize Vite project**
```bash
pnpm create vite@latest . -- --template react-ts
```

**Step 3: Install additional runtime dependencies**
```bash
pnpm add react-router-dom@^7.0.0 clsx tailwind-merge lucide-react framer-motion@^12.0.0
```

**Step 4: Install dev dependencies**
```bash
pnpm add -D @tailwindcss/vite tailwindcss@^4.0.0 autoprefixer postcss
```

**Step 5: Create directory structure**
```bash
mkdir -p src/components/{layout,sections,widgets,ui} \
  src/{pages,hooks,contexts,data,lib,types,styles} \
  public/worlds
```

**Step 6: Verify installation**
```bash
pnpm dev
```

### Package.json Dependencies

**Final package.json dependencies section:**
```json
{
  "name": "blockhaven-web",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx"
  },
  "dependencies": {
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-router-dom": "^7.0.0",
    "clsx": "^2.0.0",
    "tailwind-merge": "^2.0.0",
    "lucide-react": "^0.300.0",
    "framer-motion": "^12.0.0"
  },
  "devDependencies": {
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "@tailwindcss/vite": "^4.0.0",
    "tailwindcss": "^4.0.0",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.32",
    "typescript": "^5.7.0",
    "vite": "^6.0.0",
    "@vitejs/plugin-react": "^4.3.0",
    "eslint": "^8.55.0"
  }
}
```

## Acceptance Criteria Mapping

### Story Criterion 1: Project initialization succeeds
**From story:** "When I run `pnpm create vite@latest . -- --template react-ts`, the Vite project is initialized"

**Verification:**
- Manual check: Run command and verify no errors
- Manual check: Confirm vite.config.ts, tsconfig.json, index.html exist
- Manual check: Confirm src/main.tsx and src/App.tsx exist

### Story Criterion 2: Dependencies installed successfully
**From story:** "When I run `pnpm install`, all core dependencies are installed"

**Verification:**
- Manual check: Run `pnpm install` without errors
- Manual check: Verify node_modules/ directory exists
- Manual check: Verify pnpm-lock.yaml is generated
- Manual check: Run `pnpm list` and verify all packages listed

### Story Criterion 3: Development server starts
**From story:** "When I run `pnpm dev`, Vite development server starts"

**Verification:**
- Manual check: Run `pnpm dev` and verify server starts on port 5173
- Manual check: Open http://localhost:5173 and see React welcome page
- Manual check: Edit src/App.tsx and verify HMR updates without page reload

### Story Criterion 4: Project structure created
**From story:** "All required directories exist"

**Verification:**
- Shell script: Verify all directories exist
```bash
test -d src/components/layout && \
test -d src/components/sections && \
test -d src/components/widgets && \
test -d src/components/ui && \
test -d src/pages && \
test -d src/hooks && \
test -d src/contexts && \
test -d src/data && \
test -d src/lib && \
test -d src/types && \
test -d src/styles && \
test -d public/worlds && \
echo "All directories exist" || echo "Missing directories"
```

### Story Criterion 5: TypeScript compilation works
**From story:** "When I run `pnpm build`, TypeScript compilation succeeds"

**Verification:**
- Manual check: Run `pnpm build` without errors
- Manual check: Verify dist/ directory is created
- Manual check: Verify dist/index.html exists
- Manual check: Verify dist/assets/ contains compiled JS and CSS

## Testing Requirements

### Unit Tests

Not applicable for this story (no custom code, just scaffolding)

### Integration Tests

Not applicable for this story

### Manual Testing Checklist

- [ ] Navigate to `/home/aaronprill/projects/blockhaven/web/`
- [ ] Run `pnpm create vite@latest . -- --template react-ts` successfully
- [ ] Run `pnpm install` and verify no errors
- [ ] Run `pnpm add react-router-dom clsx tailwind-merge lucide-react framer-motion`
- [ ] Run `pnpm add -D @tailwindcss/vite tailwindcss autoprefixer postcss`
- [ ] Create all required directories with `mkdir -p` command
- [ ] Run `pnpm dev` and verify server starts
- [ ] Open http://localhost:5173 in browser and see Vite + React page
- [ ] Edit src/App.tsx (change text) and verify HMR updates page instantly
- [ ] Stop server (Ctrl+C) and run `pnpm build` successfully
- [ ] Verify dist/ directory contains production build
- [ ] Run `pnpm preview` and verify production build serves correctly

## Dependencies

**Must complete first:**
- None (foundation story)
- Prerequisite: Node.js 20+ and pnpm must be installed on system

**Enables:**
- Spec 02: Tailwind CSS Configuration
- Spec 03: Theme Context & Dark Mode
- All subsequent specs (need project structure)

## Risks & Mitigations

**Risk 1:** React 19 may have compatibility issues with some dependencies
**Mitigation:** Use latest versions of all dependencies that explicitly support React 19
**Fallback:** If critical dependency doesn't support React 19, use React 18.3 instead

**Risk 2:** Vite template may change structure in future updates
**Mitigation:** Pin create-vite to specific version if needed, or accept template changes
**Fallback:** Manually configure Vite if template is unusable

**Risk 3:** pnpm may not be installed on developer machine
**Mitigation:** Document pnpm installation in README: `npm install -g pnpm`
**Fallback:** Use npm instead (slower but functional)

## Performance Considerations

**Expected load:** Development only (local machine)
**Optimization strategy:** Vite provides fast HMR and optimized builds by default
**Benchmarks:**
- Dev server start time: <3 seconds
- HMR update time: <100ms
- Production build time: <30 seconds (will increase as project grows)

## Security Considerations

**Authentication:** Not applicable (local development)
**Authorization:** Not applicable
**Data validation:** Not applicable (no user input)
**Sensitive data:** Add .env to .gitignore to prevent committing secrets

## Success Verification

After implementation, verify:
- [ ] `pnpm dev` starts Vite server without errors
- [ ] Browser displays Vite + React welcome page at http://localhost:5173
- [ ] HMR works (edit App.tsx, see instant update)
- [ ] All directory structure exists (run directory check script)
- [ ] `pnpm build` creates dist/ with production build
- [ ] `pnpm preview` serves production build
- [ ] No console errors in browser
- [ ] package.json contains all required dependencies
- [ ] pnpm-lock.yaml exists
- [ ] .gitignore excludes node_modules and dist

## Traceability

**Parent story:** .storyline/stories/epic-001/story-01-vite-react-project-initialization.md
**Parent epic:** .storyline/epics/epic-001-website-foundation-theme.md

## Implementation Notes

**Working directory:** `/home/aaronprill/projects/blockhaven/web/`

**Prerequisites:**
- Node.js 20+ installed (`node --version`)
- pnpm installed (`pnpm --version` or install with `npm install -g pnpm`)

**Open questions:**
- Should we add ESLint configuration now or in a later story? (Decision: Add basic config from Vite template, refine later if needed)

**Assumptions:**
- Developer has write permissions to `/home/aaronprill/projects/blockhaven/web/`
- Internet connection available for downloading packages
- Port 5173 is available (Vite default port)

**Order of operations:**
1. Run Vite create command
2. Install all dependencies (runtime + dev)
3. Create directory structure
4. Verify dev server works
5. Test production build

**Time estimate:** 30-60 minutes (including package installation time)

---

**Next step:** Run `/dev-story .storyline/specs/epic-001/spec-001-vite-react-project-initialization.md`
